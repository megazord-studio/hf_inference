{% macro render_fields(fields, id_prefix='fld') %}
{% for f in fields %}
<div class="form-control">
  <label class="label" for="{{ id_prefix }}_{{ f.name }}">
    <span class="label-text">{{ f.label or f.name }}</span>
  </label>

  {% if f.type == 'file' %}
  <input id="{{ id_prefix }}_{{ f.name }}" name="{{ f.name }}" type="file"
         class="file-input file-input-bordered w-full"
         {% if f.accept %}accept="{{ f.accept }}" {% endif %}
         {% if f.required %}required{% endif %}/>
  {% if f.accept %}
  <div class="text-xs opacity-70 mt-1">
    {% if f.accept.startswith('image') %}Accepted: Images{% elif
    f.accept.startswith('audio') %}Accepted: Audio{% elif
    f.accept.startswith('video') %}Accepted: Video{% else %}Accepted: {{
    f.accept }}{% endif %}
  </div>
  {% endif %}

  {% elif f.type == 'textarea' %}
  <textarea id="{{ id_prefix }}_{{ f.name }}" name="{{ f.name }}" rows="4"
            class="textarea textarea-bordered w-full"
            {% if f.required %}required{% endif %}
            placeholder="{{ f.placeholder or '' }}"></textarea>

  {% elif f.type == 'json' %}
  <textarea id="{{ id_prefix }}_{{ f.name }}" name="{{ f.name }}" rows="4"
            class="textarea textarea-bordered w-full font-mono"
            data-type="json" {% if f.required %}required{% endif %}
            placeholder="{{ f.placeholder or '' }}"></textarea>
  {% if f.help %}
  <div class="text-xs opacity-70 mt-1">{{ f.help }}</div>
  {% endif %}

  {% else %}
  <input id="{{ id_prefix }}_{{ f.name }}" name="{{ f.name }}" type="text"
         class="input input-bordered w-full"
         {% if f.required %}required{% endif %}
         placeholder="{{ f.placeholder or '' }}"/>
  {% endif %}
</div>
{% endfor %}
{% endmacro %}
